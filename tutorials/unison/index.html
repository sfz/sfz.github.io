<!DOCTYPE html>
<html
	lang="en"
	data-bs-theme="auto"
>
	<head>
		<meta charset="utf-8">
		<meta name="author" content="Karoryfer Samples and SFZ Format Team">
		<meta name="web-author" content="redtide and SFZ Format Team">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
		<title>Unison - SFZ Format</title>
	
		<script src="../../assets/js/color-modes.js"></script>
		<link href="../../atom.xml" rel="alternate" title="News" type="application/atom+xml" />

		
		<!-- realfavicongenerator.net -->
		<link rel="apple-touch-icon" sizes="152x152" href="../../assets/ico/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="../../assets/ico/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../../assets/ico/favicon-16x16.png">
		<link rel="manifest" href="../../assets/ico/site.webmanifest">
		<link rel="mask-icon" href="../../assets/ico/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="../../assets/ico/favicon.ico">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="msapplication-config" content="../../assets/ico/browserconfig.xml">
		<meta name="theme-color" content="#ffffff">
		<link href="../../assets/css/style.min.css" rel="stylesheet" media="screen">
		<link href="../../../../assets/css/fontawesome.min.css" rel="stylesheet">
		<link href="../../../../assets/css/brands.min.css" rel="stylesheet">
		<link href="../../../../assets/css/solid.min.css" rel="stylesheet">
		<link href="../../../../assets/css/v4-font-face.min.css" rel="stylesheet">
		<link href="../../../../assets/css/bootstrap-table.min.css" rel="stylesheet">		<link
			rel="stylesheet"
			href="../../assets/css/github.min.css"
			disabled="disabled"
			id="hljs_light"
		/>
		<link
			rel="stylesheet"
			href="../../assets/css/github-dark-dimmed.min.css"
			disabled="disabled"
			id="hljs_dark"
		/>
	</head>
	<body>
		<button onclick="topFunction()" id="scrollButton" title="Go to top">Top</button>
		<div class="container">			<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  		<!--!
				Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License
				https://fontawesome.com/license/free
				(Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
				Copyright 2023 Fonticons, Inc.
			-->
				<symbol id="sun" viewBox="0 0 512 512">
					<path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z" />
				</symbol>
				<symbol id="moon" viewBox="0 0 384 512">
					<path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z" />
				</symbol>
				<symbol id="circle-half-stroke" viewBox="0 0 512 512">
					<path d="M448 256c0-106-86-192-192-192V448c106 0 192-86 192-192zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z" />
				</symbol>
				<symbol id="check" viewBox="0 0 448 512">
					<path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z" />
				</symbol>
			</svg>
			<nav
				class="navbar navbar-expand-lg bg-dark text-bg-dark"
				data-bs-theme="dark"
			>
				<div class="container-fluid">

					<button
						class="navbar-toggler"
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#navbarContent"
						aria-controls="navbarContent"
						aria-expanded="false"
						aria-label="Toggle navigation"
					>
						<span class="navbar-toggler-icon"></span>
					</button>

					<a
						class="navbar-brand"
						href="../.."
						>
							<img
								alt="Logo image"
								src="../../assets/img/logo.svg"
							/>
					</a>

					<div class="collapse navbar-collapse" id="navbarContent">
						<ul class="navbar-nav mt-2 mt-lg-0">
							<li class="nav-item dropdown">
								<a
									class="nav-link dropdown-toggle"
									href="#"
									id="navbarSyntax"
									role="button"
									data-bs-toggle="dropdown"
									aria-expanded="false"
									aria-haspopup="true"
								>
									Syntax
								</a>
								<ul
									class="dropdown-menu"
									aria-labelledby="navbarSyntax"
								>
									<li>
										<a class="dropdown-item"
											href="/headers/"
										>
											Headers
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/opcodes/"
										>
											Opcodes
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/modulations/"
										>
											Modulations
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/modulations/envelope_generators"
										>
											Envelope Generators
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/modulations/lfo"
										>
											LFO
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/extensions/midi_ccs"
										>
											Extended MIDI CCs
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/misc/categories"
										>
											Types & Categories
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/versions"
										>
											Versions
										</a>
									</li>
								</ul>
							</li>
							<li class="nav-item dropdown">
								<a
									class="nav-link dropdown-toggle"
									href="#"
									id="navbarSoftware"
									role="button"
									data-bs-toggle="dropdown"
									aria-expanded="false"
									aria-haspopup="true"
								>
									Software
								</a>
								<ul
									class="dropdown-menu"
									aria-labelledby="navbarSoftware"
								>
									<li>
										<a class="dropdown-item"
											href="/software/players"
										>
											Players
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/software/tools"
										>
											Tools
										</a>
									</li>
								</ul>
							</li>
							<li class="nav-item dropdown">
								<a
									class="nav-link dropdown-toggle"
									href="#"
									id="navbarTutorials"
									role="button"
									data-bs-toggle="dropdown"
									aria-expanded="false"
									aria-haspopup="true"
								>
									Tutorials
								</a>
								<ul
									class="dropdown-menu"
									aria-labelledby="navbarTutorials"
								>
									<li>
										<a class="dropdown-item"
											href="/tutorials/basics"
										>
											Basics
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/tutorials/basic_sfz_file"
										>
											Basic / Template
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/sustained_note_basics"
										>
											Sustained Note Basics
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/vibrato"
										>
											Vibrato
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/legato"
										>
											Legato
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/unison"
										>
											Unison
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/range_extension"
										>
											Range Extension
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/modular_instruments"
										>
											Modular Instruments
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/subtractive_synths"
										>
											Subtractive Synthesizers
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/strum"
										>
											Strumming
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/tutorials/drum_basics"
										>
											Drum & Round Robin Basics
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/cymbal_muting"
										>
											Cymbal Muting
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/epic_drums"
										>
											Epic Drums
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/brush_stirs"
										>
											Brush Stirs
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/tutorials/envelope_generators"
										>
											Envelope Generators
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/sfz1_modulations"
										>
											SFZ 1 Modulations
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/sfz2_modulations"
										>
											SFZ 2 Modulations
										</a>
									</li>
									<li>
										<a class="dropdown-item"
											href="/tutorials/lfo"
										>
											Pitch LFO Examples
										</a>
									</li>
									<div class="dropdown-divider"></div>
									<li>
										<a class="dropdown-item"
											href="/tutorials/videos"
										>
											Video Tutorials
										</a>
									</li>
								</ul>
							</li>
							<li class="nav-item">
								<a
									class="nav-link"
									href="https://sfzinstruments.github.io"
								>
									Instruments
								</a>
							</li>
							<li class="nav-item">
								<a
									class="nav-link"
									href="/news"
								>
									News
								</a>
							</li>
						</ul>
						<ul class="navbar-nav ms-auto">
							<li class="nav-item">
									<a
										href="#"
										class="nav-link"
										data-bs-toggle="modal"
										data-bs-target="#mkdocs_search_modal">
											<i class="fa fa-search"></i> Search
									</a>
							</li>
							<li class="nav-item dropdown">
								<button
									class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center"
									id="bd-theme"
									type="button"
									aria-expanded="false"
									data-bs-toggle="dropdown"
									data-bs-display="static"
									aria-label="Toggle theme (auto)">
									<svg class="bi my-1 theme-icon-active"><use href="#circle-half-stroke"></use></svg>
									<span class="d-lg-none ms-2" id="bd-theme-text">Toggle theme</span>
								</button>
								<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
									<li>
										<button
											type="button"
											class="dropdown-item d-flex align-items-center"
											data-bs-theme-value="light"
											aria-pressed="false">
											<svg class="bi me-2 opacity-50 theme-icon"><use href="#sun"></use></svg>
											Light
											<svg class="bi ms-auto d-none"><use href="#check"></use></svg>
										</button>
									</li>
									<li>
										<button
											type="button"
											class="dropdown-item d-flex align-items-center"
											data-bs-theme-value="dark"
											aria-pressed="false">
											<svg class="bi me-2 opacity-50 theme-icon"><use href="#moon"></use></svg>
											Dark
											<svg class="bi ms-auto d-none"><use href="#check"></use></svg>
										</button>
									</li>
									<li>
										<button
											type="button"
											class="dropdown-item d-flex align-items-center active"
											data-bs-theme-value="auto"
											aria-pressed="true">
											<svg class="bi me-2 opacity-50 theme-icon"><use href="#circle-half-stroke"></use></svg>
											Auto
											<svg class="bi ms-auto d-none"><use href="#check"></use></svg>
										</button>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</nav>
			<div class="row mt-4" id="content">
				<div class="col-md-9">
					<article>
						<h1>Unison</h1><p>This tutorial describes various methods of using one set of samples to emulate
the sound of larger numbers of instruments - making a small ensemble sound
larger, using one set of samples for both first and second violins, automatically
multitracking guitars, synthesizer oscillator unison etc.</p>
<h2 id="transposition">Transposition</h2>
<p>Let's say we have only one sampled violin section, and need to use both first and
second violins. Using just one octave of range for simplicity, this is our first
violins example:</p>
<pre><code class="language-sfz">&lt;global&gt;
&lt;region&gt;sample=c4.wav key=48
&lt;region&gt;sample=db4.wav key=49
&lt;region&gt;sample=d4.wav key=50
&lt;region&gt;sample=eb4.wav key=51
&lt;region&gt;sample=e4.wav key=52
&lt;region&gt;sample=f4.wav key=53
&lt;region&gt;sample=gb4.wav key=54
&lt;region&gt;sample=g4.wav key=55
&lt;region&gt;sample=ab4.wav key=56
&lt;region&gt;sample=a4.wav key=57
&lt;region&gt;sample=bb4.wav key=58
&lt;region&gt;sample=b4.wav key=59
&lt;region&gt;sample=c5.wav key=60
</code></pre>
<p>Using this for both first and second violins will result in two identical-sounding
sections with the same timbre, but it's easily possible to use the same samples
transposed, and get a different timbre. Instead of using the C4 sample to play C4,
use the Db4 sample transposed down a half step to play C4. This can be done by
using lokey, hikey and pitch_keycenter opcodes instead of just key.</p>
<pre><code class="language-sfz">&lt;region&gt;sample=c4.wav lokey=47 hikey=47 pitch_keycenter=48
&lt;region&gt;sample=db4.wav lokey=48 hikey=48 pitch_keycenter=49
&lt;region&gt;sample=d4.wav lokey=49 hikey=49 pitch_keycenter=50
&lt;region&gt;sample=eb4.wav lokey=50 hikey=50 pitch_keycenter=51
&lt;region&gt;sample=e4.wav lokey=51 hikey=51 pitch_keycenter=52
&lt;region&gt;sample=f4.wav lokey=52 hikey=52 pitch_keycenter=53
&lt;region&gt;sample=gb4.wav lokey=53 hikey=53 pitch_keycenter=54
&lt;region&gt;sample=g4.wav lokey=54 hikey=54 pitch_keycenter=55
&lt;region&gt;sample=ab4.wav lokey=55 hikey=55 pitch_keycenter=56
&lt;region&gt;sample=a4.wav lokey=56 hikey=56 pitch_keycenter=57
&lt;region&gt;sample=bb4.wav lokey=57 hikey=57 pitch_keycenter=58
&lt;region&gt;sample=b4.wav lokey=58 hikey=58 pitch_keycenter=59
&lt;region&gt;sample=c5.wav lokey=59 hikey=59 pitch_keycenter=60
</code></pre>
<p>Howerver, in most cases it's easier to use the key and transpose opcodes instead,
and set the transpose amount for all the transposed regions at once.</p>
<pre><code class="language-sfz">&lt;global&gt;
transpose=-1
&lt;region&gt;sample=c4.wav key=47
&lt;region&gt;sample=db4.wav key=48
&lt;region&gt;sample=d4.wav key=49
&lt;region&gt;sample=eb4.wav key=50
&lt;region&gt;sample=e4.wav key=51
&lt;region&gt;sample=f4.wav key=52
&lt;region&gt;sample=gb4.wav key=53
&lt;region&gt;sample=g4.wav key=54
&lt;region&gt;sample=ab4.wav key=55
&lt;region&gt;sample=a4.wav key=56
&lt;region&gt;sample=bb4.wav key=57
&lt;region&gt;sample=b4.wav key=58
&lt;region&gt;sample=c5.wav key=59
</code></pre>
<p>This still requires changing the key opcode for every region, however. Doing
this editing manually on large sample sets would be time-consuming, but
the old tool sfzed allows easily adding, subtracting or multiplying current
parameter values to regions, which becomes very useful when doing this with
thousands of samples.</p>
<p>This shifts the entire range of the instrument down by a half-step, though. In
order to preserve the correct range, we can remove the transposed notes which
got moved below the lowest pitch the instrument is capable of. That's easy. The
top range is more tricky - if we extend the highest note to cover its original
pitch as well, but then the same sample would be used for the same pitch by
both sections. So, we can instead use the next-to-highest note, transposed up.
This might not sound very consistent with the rest, but under these limitations,
it can be a reasonable compromise.</p>
<pre><code class="language-sfz">&lt;global&gt;
transpose=-1
&lt;region&gt;sample=db4.wav key=48
&lt;region&gt;sample=d4.wav key=49
&lt;region&gt;sample=eb4.wav key=50
&lt;region&gt;sample=e4.wav key=51
&lt;region&gt;sample=f4.wav key=52
&lt;region&gt;sample=gb4.wav key=53
&lt;region&gt;sample=g4.wav key=54
&lt;region&gt;sample=ab4.wav key=55
&lt;region&gt;sample=a4.wav key=56
&lt;region&gt;sample=bb4.wav key=57
&lt;region&gt;sample=b4.wav key=58
&lt;region&gt;sample=c5.wav key=59
&lt;region&gt;sample=b4.wav key=60 transpose=1
</code></pre>
<h2 id="transposition-values">Transposition Values</h2>
<p>In general, transposing downwards will result in a warmer sound, and transposing
upwards will make the sound brighter and thinner. Transposing by more than a half
step can be a good idea. In general, transposing by a minor third is a common way
to create a big change in timbre. Transposing by much more than a minor third
doesn't seem common outside of sound design not intended to be a realistic instrument
emulation.</p>
<p>Transposing down by a minor third while preserving the range in our example, and
filling in the lost top of the range by transposing upwards might look like this:</p>
<pre><code class="language-sfz">&lt;global&gt;
transpose=-3
&lt;region&gt;sample=eb4.wav key=48
&lt;region&gt;sample=e4.wav key=49
&lt;region&gt;sample=f4.wav key=50
&lt;region&gt;sample=gb4.wav key=51
&lt;region&gt;sample=g4.wav key=52
&lt;region&gt;sample=ab4.wav key=53
&lt;region&gt;sample=a4.wav key=54
&lt;region&gt;sample=bb4.wav key=55
&lt;region&gt;sample=b4.wav key=56
&lt;region&gt;sample=c5.wav key=57
&lt;region&gt;sample=a4.wav key=58 transpose=1
&lt;region&gt;sample=bb4.wav key=59 transpose=1
&lt;region&gt;sample=b4.wav key=60 transpose=1
</code></pre>
<p>Note that all of the above assumes the instrument is sampled chromatically; for
instruments which are sampled at wholetone intervals or diatonically, transposition
by at least a whole step will be necessary to avoid using the same samples for a
note. Instruments which are sampled every minor third will need an interval of at
least a minor third etc.</p>
<h2 id="unison-by-transposition">Unison By Transposition</h2>
<p>If we put both the original and transposed samples in the same SFZ file, each MIDI
note will trigger two regions, and we now will have the sound of an ensemble which
is twice as large as what was actually sampled.</p>
<pre><code class="language-sfz">&lt;group&gt;
&lt;region&gt;sample=c4.wav key=48
&lt;region&gt;sample=db4.wav key=49
&lt;region&gt;sample=d4.wav key=50
&lt;region&gt;sample=eb4.wav key=51
&lt;region&gt;sample=e4.wav key=52
&lt;region&gt;sample=f4.wav key=53
&lt;region&gt;sample=gb4.wav key=54
&lt;region&gt;sample=g4.wav key=55
&lt;region&gt;sample=ab4.wav key=56
&lt;region&gt;sample=a4.wav key=57
&lt;region&gt;sample=bb4.wav key=58
&lt;region&gt;sample=b4.wav key=59
&lt;region&gt;sample=c5.wav key=60

&lt;group&gt;
transpose=-1
&lt;region&gt;sample=db4.wav key=48
&lt;region&gt;sample=d4.wav key=49
&lt;region&gt;sample=eb4.wav key=50
&lt;region&gt;sample=e4.wav key=51
&lt;region&gt;sample=f4.wav key=52
&lt;region&gt;sample=gb4.wav key=53
&lt;region&gt;sample=g4.wav key=54
&lt;region&gt;sample=ab4.wav key=55
&lt;region&gt;sample=a4.wav key=56
&lt;region&gt;sample=bb4.wav key=57
&lt;region&gt;sample=b4.wav key=58
&lt;region&gt;sample=c5.wav key=59
&lt;region&gt;sample=b4.wav key=60 transpose=1
</code></pre>
<h2 id="unison-by-round-robin">Unison By Round Robin</h2>
<p>For cases where the goal is to emulate overdubbed copies of the same instrument
with the same timbre, rather than different instruments with different timbres,
it's still necessary to avoid triggering the same samples. For example,
is how guitar multitracking is typically emulated. This approach also
works for instruments which are not pitched but it makes sense to layer them,
for example handclaps. In such cases, unison can be implemented by using
different round robin samples for each simultaneously playing sample. Using
one note with four round robins as an example:</p>
<pre><code class="language-sfz">&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=1
&lt;region&gt;sample=c4_rr2.wav seq_position=2
&lt;region&gt;sample=c4_rr3.wav seq_position=3
&lt;region&gt;sample=c4_rr4.wav seq_position=4
</code></pre>
<p>We can create two by offsetting the round robins like this:</p>
<pre><code class="language-sfz">&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=1
&lt;region&gt;sample=c4_rr2.wav seq_position=2
&lt;region&gt;sample=c4_rr3.wav seq_position=3
&lt;region&gt;sample=c4_rr4.wav seq_position=4
&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=4
&lt;region&gt;sample=c4_rr2.wav seq_position=1
&lt;region&gt;sample=c4_rr3.wav seq_position=2
&lt;region&gt;sample=c4_rr4.wav seq_position=3
</code></pre>
<p>The group headers aren't necessary and everything could be under one group,
but for organizational purposes, they can make things easier.</p>
<p>Or three, or a maximum of four:</p>
<pre><code class="language-sfz">&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=1
&lt;region&gt;sample=c4_rr2.wav seq_position=2
&lt;region&gt;sample=c4_rr3.wav seq_position=3
&lt;region&gt;sample=c4_rr4.wav seq_position=4
&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=4
&lt;region&gt;sample=c4_rr2.wav seq_position=1
&lt;region&gt;sample=c4_rr3.wav seq_position=2
&lt;region&gt;sample=c4_rr4.wav seq_position=3
&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=3
&lt;region&gt;sample=c4_rr2.wav seq_position=4
&lt;region&gt;sample=c4_rr3.wav seq_position=1
&lt;region&gt;sample=c4_rr4.wav seq_position=2
&lt;group&gt;seq_length=4 key=48
&lt;region&gt;sample=c4_rr1.wav seq_position=2
&lt;region&gt;sample=c4_rr2.wav seq_position=3
&lt;region&gt;sample=c4_rr3.wav seq_position=4
&lt;region&gt;sample=c4_rr4.wav seq_position=1
</code></pre>
<p>Note that this will not work well with random round robins, as it's
possible that the same sample will be randomly selected for multiple
regions.</p>
<h2 id="width-and-detune">Width And Detune</h2>
<p>Multitracked guitars will often be spread in stereo, as will unison voices
in synthesizers etc. Spreading the above quad-tracked guitar in stereo
is simple:</p>
<pre><code class="language-sfz">&lt;group&gt;seq_length=4 key=48
pan=-100
&lt;region&gt;sample=c4_rr1.wav seq_position=1
&lt;region&gt;sample=c4_rr2.wav seq_position=2
&lt;region&gt;sample=c4_rr3.wav seq_position=3
&lt;region&gt;sample=c4_rr4.wav seq_position=4
&lt;group&gt;seq_length=4 key=48
pan=100
&lt;region&gt;sample=c4_rr1.wav seq_position=4
&lt;region&gt;sample=c4_rr2.wav seq_position=1
&lt;region&gt;sample=c4_rr3.wav seq_position=2
&lt;region&gt;sample=c4_rr4.wav seq_position=3
&lt;group&gt;seq_length=4 key=48
pan=-50
&lt;region&gt;sample=c4_rr1.wav seq_position=3
&lt;region&gt;sample=c4_rr2.wav seq_position=4
&lt;region&gt;sample=c4_rr3.wav seq_position=1
&lt;region&gt;sample=c4_rr4.wav seq_position=2
&lt;group&gt;seq_length=4 key=48
pan=50
&lt;region&gt;sample=c4_rr1.wav seq_position=2
&lt;region&gt;sample=c4_rr2.wav seq_position=3
&lt;region&gt;sample=c4_rr3.wav seq_position=4
&lt;region&gt;sample=c4_rr4.wav seq_position=1
</code></pre>
<p>It's also possible to apply slight detuning to each voice. That's probably
not common with guitars, and unnecessary with section recordings where natural
tuning differences will already be captured in the recordings, but it is very
common in synthesizers, and can also be helpful when trying to turn solo
instrument samples into a small section. Detune can even be used by itself
to create multiple voices, and this is an especially viable approach for
synthesizers. The amount of detune, as well as width, can be modulated. Here
is an example of a saw oscillator with seven voices.</p>
<pre><code class="language-sfz">&lt;region&gt;sample=*saw
&lt;region&gt;pitch_oncc100=20 pan_oncc101=100 sample=*saw
&lt;region&gt;pitch_oncc100=-20 pan_oncc101=-100 sample=*saw
&lt;region&gt;pitch_oncc100=30 pan_oncc101=67 sample=*saw
&lt;region&gt;pitch_oncc100=-30 pan_oncc101=-67 sample=*saw
&lt;region&gt;pitch_oncc100=40 pan_oncc101=33 sample=*saw
&lt;region&gt;pitch_oncc100=-40 pan_oncc101=-33 sample=*saw
</code></pre>
<h2 id="legato">Legato</h2>
<p>When self-muting is implemented, each set of unison samples will need to have its
own polyphony groups, same as would be needed with multiple microphone positions.</p>
<p>If there are true legato samples, that adds considerable complexity to the
transposition trick. The below steps are not a universal set of instructions, but
have worked successfully for at least two instruments.</p>
<ul>
<li>Create an extended-range map extending the range by the largest transposition amount in the direction opposite of the transposition. For example, if there are four transposed voices and are to be transposed down by a half-step, a full step, a minor third and a major third, add a major third of range to the top of the extended map. See <a href="../range_extension/">the range extension tutorial</a> for details on the basics.</li>
<li>In addition to extending the lokey/hikey range, remember that the sw_previous range will also need to be extended. For the extremes of the range, there will be no samples with the correct interval available - use the nearest available interval. For the highest note of the extended range, there will be no upward interval sample available, but in practice using a sample of a downward half-step interval seems to work tolerably well.</li>
<li>Make copies of this extended map to create the to-be-transposed maps.</li>
<li>In each map, add the amount of shift for the particular map (for example -1) to lokey, hikey and sw_previous.</li>
<li>Delete any regions with lokey or hikey above or below the final desired range, which might be both at the top and bottom of a map.</li>
<li>Delete any regions with sw_previous above or below the final desired range. This isn't strictly necessary as those regions "should" never be played and will not affect the visible keyboard map, but will reduce parsing time and prevent weirdness when a note slightly outside the range is held by mistake and a note inside the range is pressed.</li>
<li>Delete any regions where the sw_previous ened up being the same as the lokey/hikey, as these will likewise be never triggered. In theory these should never be created, so this is just to catch mistakes.</li>
</ul>
<h2 id="humanization">Humanization</h2>
<p>When trying to emulate the sound of a larger section of instruments, especially when
trying to turn a solo instrument into an emulated section, it can be useful to
create small differences between each voice, especially when vibrato and legato
are also emulated. This is probably not that important with sampled ensembles, such
as emulating second violins, but with solo instruments it becomes crucial. Without
independent per-voice humanization, emulated vibrato and legato can sound more like
a solo instrument run through a chorus or other doubling effect, rather than separate
performances.</p>
<p>Aspects of the sound which can be humanized or randomized include timing, smoothing,
phase, pitch, vibrato speed and vibrato depth.</p>
<p>Here is a rather lengthy example, adapted from a real instrument, where each voice has
separate pan settings for stereo spread and separate polyphony groups - these are basic
features of unison, and not related to humanization, of course. The humanizing
differences between the voices are differences in bend smoothing, in maximum vibrato
depth, in the initial phase of the vibrato humanization LFOs, and in the fade times of
the legato regions. The shallower vibrato and slower legato of the transposed regions
emulate less confident, more hesitant players.</p>
<pre><code class="language-sfz">&lt;global&gt;
//Basic global stuff shared by all voices
ampeg_release=0.25
ampeg_attack_oncc106=1
ampeg_release_oncc107=1.25
off_mode=normal
bend_down=-1200
bend_up=1200
//Pitch bend smoothing is set separately for each voice
amplitude_oncc100=100
amplitude_smoothcc1=100
locc100=1
amp_veltrack=0
loop_mode=loop_continuous

//Vibrato
//Pitch LFO depth is set separately for each voice
lfo01_freq=2 //Any slower than this sounds really lousy
lfo01_freq_oncc112=6 //8 Hz is about as fast as vibrato on cello can go
lfo01_delay_oncc115=0.500
lfo01_fade_oncc116=0.500
//This LFO also does tremolo
lfo01_volume_oncc21=1 //Not much - just a subtle effect on volume
eq1_freq=2200 //EQ band for vibrato
eq1_bw=2
lfo01_eq1gain_oncc21=3 //Again, pretty subtle

lfo02_wave=1 //Second LFO to make things wobblier
//Initial phase is set separately for each voice
lfo02_phase_oncc131=0.7 //Phase affected by velocity, to pseudo-randomize while keeping both mics' LFOs in sync
lfo02_freq=0.01 //Basically no movement at very slow speeds, just randomization
lfo02_freq_oncc117=1 //Max rate is not very high, so it doesn't sound too obvious
lfo02_pitch_oncc117=6 //Slight pitch wobbliness
lfo02_freq_lfo01_oncc117=0.2 lfo02_freq_lfo01_oncc112=0.8 //Affect the rate of the other LFO for unsteady vibrato

lfo03_wave=1 //And a third LFO for secondhand complex wobbliness
//Initial phase is set separately for each voice
lfo03_phase_oncc131=0.479 //Different phase response to velocity than the second LFO
lfo03_freq=0.5
lfo03_freq_oncc117=-0.4
lfo03_freq_lfo2_oncc117=1
lfo03_pitch_oncc117=-4

&lt;master&gt;
//Central voice
bend_smooth=80
lfo01_pitch_oncc21=29
lfo02_phase=0
lfo03_phase=0.4
group=1
off_by=1

//Sustains legato

&lt;group&gt;
trigger=first
#include &quot;mappings/ord_sus_map.sfz&quot;

&lt;group&gt;
trigger=legato
offset=5000 offset_random=500
ampeg_attack=0.5
ampeg_vel2attack=-0.35
#include &quot;mappings/ord_sus_map.sfz&quot;


&lt;master&gt;
//Left voice using sample maps transposed by a half-step
//Pan control not used in the central voice
pan_oncc101=-100
//Values different than the central voice, for humanization purposes
bend_smooth=91
lfo01_pitch_oncc21=17
lfo02_phase=0.05
lfo03_phase=0.3
group=2
off_by=2

//Sustains legato

&lt;group&gt;
trigger=first
#include &quot;mappings/t1/ord_sus_map.sfz&quot;

&lt;group&gt;
trigger=legato
offset=5000 offset_random=500
//Values different than the central voice, for humanization purposes
ampeg_attack=0.55
ampeg_vel2attack=-0.4
#include &quot;mappings/t1/ord_sus_map.sfz&quot;


&lt;master&gt;
//Right voice using sample maps transposed by a whole step
//Pan control not used in the central voice
pan_oncc101=100
//Values different than the central voice, for humanization purposes
bend_smooth=87
lfo01_pitch_oncc21=19
lfo02_phase=0.02
lfo03_phase=0.28
group=3
off_by=3

//Sustains legato

&lt;master&gt;
trigger=first
#include &quot;mappings/t2/ord_sus_map.sfz&quot;

&lt;master&gt;
trigger=legato
offset=5000 offset_random=500
//Values different than the central voice, for humanization purposes
ampeg_attack=0.58
ampeg_vel2attack=-0.43
#include &quot;mappings/t2/ord_sus_map.sfz&quot;
</code></pre>
<h2 id="releases">Releases</h2>
<p>Implementing release samples with unison requires a little extra effort. It's easiest
to simply implement releases for the center voice only, but even then it's necessary
to be careful to avoid triggering too many release samples.</p>
<p>At least in ARIA and Sforzando, a note-on event which triggers multiple regions
(for example a multimic instrument, or one with simulated unison) will have multiple
corresponding regions for the release region, causing the release region to be triggered
multiple times. With seven mics and a separate release for each mic, this would mean a
key release would trigger a total of 49 samples if not controlled with note_polyphony.
However, setting note_polyphony=1 and giving each mic a different group number solves this.
There's no need tu use off_by with the release groups.</p>
<p>An example with releases only for the center voice:</p>
<pre><code class="language-sfz">&lt;global&gt;
//Basic global stuff shared by all voices
ampeg_release=0.25
off_mode=normal

//Center voice
&lt;master&gt;

//Sustains
&lt;group&gt;
#include &quot;mappings/ord_sus_map.sfz&quot;

//Releases
&lt;group&gt;
trigger=release
group=501
note_polyphony=1
#include &quot;mappings/ord_rel_map.sfz&quot;


&lt;master&gt;
//Left voice using sample maps transposed by a half-step
//Pan control not used in the central voice
pan_oncc101=-100

//Sustains
&lt;group&gt;
#include &quot;mappings/t1/ord_sus_map.sfz&quot;

&lt;master&gt;
//Right voice using sample maps transposed by a whole step
//Pan control not used in the central voice
pan_oncc101=100

//Sustains
&lt;master&gt;
#include &quot;mappings/t2/ord_sus_map.sfz&quot;
</code></pre>
<p>With releases for all voices, just use a different group number for each voice's
releases, like this example:</p>
<pre><code class="language-sfz">&lt;global&gt;
//Basic global stuff shared by all voices
ampeg_release=0.25
off_mode=normal

//Center voice
&lt;master&gt;

//Sustains
&lt;group&gt;
#include &quot;mappings/ord_sus_map.sfz&quot;

//Releases
&lt;group&gt;
trigger=release
group=501
note_polyphony=1
#include &quot;mappings/ord_rel_map.sfz&quot;


&lt;master&gt;
//Left voice using sample maps transposed by a half-step
//Pan control not used in the central voice
pan_oncc101=-100

//Sustains
&lt;group&gt;
#include &quot;mappings/t1/ord_sus_map.sfz&quot;

//Releases
&lt;group&gt;
trigger=release
group=502
note_polyphony=1
#include &quot;mappings/t1/ord_rel_map.sfz&quot;


&lt;master&gt;
//Right voice using sample maps transposed by a whole step
//Pan control not used in the central voice
pan_oncc101=100

//Sustains
&lt;master&gt;
#include &quot;mappings/t2/ord_sus_map.sfz&quot;

//Releases
&lt;group&gt;
trigger=release
group=503
note_polyphony=1
#include &quot;mappings/t2/ord_rel_map.sfz&quot;
</code></pre>
<p>When using releases with round robins, it can be tricky to make the release sample
round robin counter advance correctly. When there are 2 "matching" samples playing,
ARIA appears to advance the counter for the releases by 2, and if there are 4
release round robins, only 2 of them will actually be used. One workaround for that
is triggering an extra region of silence to make the round robin counter advance by
3, but this will only work if the number of regions is consistent and predictable.</p>
<p>With instruments that have release samples with a number of microphone positions
or organ stops, any of which could be on or off, the total number of matching
regions is very difficult to assess, and it's far easier to use lorand/hirand to
select the release samples instead.</p>
<h2 id="round-robin-neighbor-borrowing">Round Robin Neighbor Borrowing</h2>
<p>Although not a method of achieving unison, round robin neighbor borrowing
is another use of transposition, which likewise milks more out of a limited
set of samples - specifically, emulating round robins where there are none,
or increasing the amonut of available round robins.</p>
<p>This works with either sequential round robin and random round robin
approaches, or both at once. Let's use sequential round robins for this
example, with a very small note range and three round robins sampled.</p>
<pre><code class="language-sfz">&lt;global&gt;
seq_length=3

&lt;group&gt;
seq_position=1
&lt;region&gt;sample=c5_rr1.wav key=60
&lt;region&gt;sample=c#5_rr1.wav key=61
&lt;region&gt;sample=d5_rr1.wav key=62


&lt;group&gt;
seq_position=2
&lt;region&gt;sample=c5_rr2.wav key=60
&lt;region&gt;sample=c#5_rr2.wav key=61
&lt;region&gt;sample=d5_rr2.wav key=62


&lt;group&gt;
seq_position=3
&lt;region&gt;sample=c5_rr3.wav key=60
&lt;region&gt;sample=c#5_rr3.wav key=61
&lt;region&gt;sample=d5_rr3.wav key=62
</code></pre>
<p>We can double the amount of round robins by using a transposed
sample from a neighboring note for every other note in the
sequence. This means every other note repeat has a slightly
different timbre, but it should sound more acceptable than
using untransposed notes for the first three sequence positions
and transposed notes for positions four through six. So, we
increase the sequence length to six, and alternate between
transposed and untransposed samples like this:</p>
<pre><code class="language-sfz">&lt;global&gt;
seq_length=6

&lt;group&gt;
seq_position=1
&lt;region&gt;sample=c5_rr1.wav key=60
&lt;region&gt;sample=c#5_rr1.wav key=61
&lt;region&gt;sample=d5_rr1.wav key=62

&lt;group&gt;
seq_position=2
&lt;region&gt;sample=c#5_rr1.wav key=60 transpose=-1
&lt;region&gt;sample=d5_rr1.wav key=61 transpose=-1
&lt;region&gt;sample=c#5_rr1.wav key=62 transpose=1

&lt;group&gt;
seq_position=3
&lt;region&gt;sample=c5_rr2.wav key=60
&lt;region&gt;sample=c#5_rr2.wav key=61
&lt;region&gt;sample=d5_rr2.wav key=62

&lt;group&gt;
seq_position=4
&lt;region&gt;sample=c#5_rr2.wav key=60 transpose=-1
&lt;region&gt;sample=d5_rr2.wav key=61 transpose=-1
&lt;region&gt;sample=c#5_rr2.wav key=62 transpose=1

&lt;group&gt;
seq_position=5
&lt;region&gt;sample=c5_rr3.wav key=60
&lt;region&gt;sample=c#5_rr3.wav key=61
&lt;region&gt;sample=d5_rr3.wav key=62

&lt;group&gt;
seq_position=6
&lt;region&gt;sample=c#5_rr3.wav key=60 transpose=-1
&lt;region&gt;sample=d5_rr3.wav key=61 transpose=-1
&lt;region&gt;sample=c#5_rr3.wav key=62 transpose=1
</code></pre>
<p>It's also possible to triple the amount of round robins by
borrowing neighbors in both upwards and downwards direction
for each note (except the lowest and highest note in the range,
of course). In general, transposing by more than a half-step
is not a good idea, as the timbral differences grow larger with
larger transposition, but with some instruments it can be
possible to get away with it. If there are many dynamic layers
available, it's also possible to borrow from nearby dynamic layers,
especially in the case of drums.</p>
					</article>
				</div>
				<div class="col-md-3">
					<aside>
						<div class="card mb-3">
							<div class="card-header bg-dark text-bg-dark">
								<i class="fa fa-eye"
									aria-hidden="true"></i>
								Follow us
							</div>
							<div class="card-body" style="padding: 0.5rem">
								<ul class="nav nav-pills flex-column">
									<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfz/"
											title="GitHub Organization" style="padding: 0.35rem 0.25rem">
										<i class="fab fa-github fa-fw"
										aria-hidden="true"></i>
										GitHub Organization</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="/atom.xml"
											title="News Atom Feed" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-rss fa-fw"
										aria-hidden="true"></i>
										News Atom Feed</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://discord.gg/t7nrZ6d"
											title="Discord Chat" style="padding: 0.35rem 0.25rem">
										<i class="fab fa-discord fa-fw"
										aria-hidden="true"></i>
										Discord Chat</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://kiwiirc.com/nextclient/#irc://irc.libera.chat:+6697/#sfzformat"
											title="Internet Relay Chat" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-hashtag fa-fw"
										aria-hidden="true"></i>
										IRC</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="card mb-3">
							<div class="card-header bg-dark text-bg-dark">
								<i class="fa fa-link"
									aria-hidden="true"></i>
								Quick links
							</div>
							<div class="card-body" style="padding: 0.5rem">
								<ul class="nav nav-pills flex-column">
									<li class="nav-item">
										<a class="nav-link" href="/legacy"
											title="Old rgc:audio SFZ page" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-book fa-fw"
										aria-hidden="true"></i>
										Old rgc:audio SFZ page</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="http://www.drealm.info/sfz/"
											title="Peter L. Jones' SFZ page" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-book fa-fw"
										aria-hidden="true"></i>
										Peter L. Jones' SFZ page</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://www.kvraudio.com/forum/viewtopic.php?f=42&t=508861"
											title="KVR Forum SFZ post" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-users fa-fw"
										aria-hidden="true"></i>
										KVR Forum SFZ post</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://www.plogue.com/plgfrms/viewforum.php?f=14"
											title="Plogue Forum" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-users fa-fw"
										aria-hidden="true"></i>
										Plogue Forum</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfz/tests/"
											title="rgc:audio SFZ test suite" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-download fa-fw"
										aria-hidden="true"></i>
										rgc:audio SFZ test suite</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" href="https://github.com/sfz/opcode-suggestions/"
											title="Opcode suggestions" style="padding: 0.35rem 0.25rem">
										<i class="fa fa-lightbulb fa-fw"
										aria-hidden="true"></i>
										Opcode suggestions</a>
									</li>
								</ul>
							</div>
						</div>
						
					</aside>
				</div>
			</div>			<hr>
			<footer>
				<p style="text-align:left">
					<span style="float:right">
						This site is open source.
						<a href="https://github.com/sfz/sfz.github.io/edit/source/docs/tutorials/unison.md">
						Improve this page</a>
					</span>
				</p>
			</footer>
		</div>		<script>
			var base_url	= "../..",
					shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
		</script>
		<script src="../../assets/js/jquery.min.js"></script>
		<script async defer src="../../assets/js/popper.min.js"></script>
		<script async defer src="../../assets/js/bootstrap.min.js"></script>
		<script async defer src="../../assets/js/anchor.min.js"></script>
		<script async defer src="../../assets/js/base.min.js"></script>
		<script async defer src="../../assets/js/scroll-to-top.min.js"></script>
		<script async defer src="../../../../assets/js/index.bundle.min.js"></script>
		<script async defer src="../../../../assets/js/bootstrap-table.min.js"></script>
		<script async defer src="../../../../assets/js/mermaid.min.js"></script>
		<script async defer src="../../../../search/main.js"></script>		<script
			type="text/javascript"
			src="../../assets/js/highlight.min.js">
		</script>
		<script
			type="text/javascript"
			src="../../assets/js/bash.min.js">
		</script>
		<script
			type="text/javascript"
			src="../../assets/js/cpp.min.js">
		</script>
		<script
			type="text/javascript"
			src="../../assets/js/sfz.min.js">
		</script>
		<script>hljs.highlightAll();</script>
		<script>
			window.addEventListener("load", function (event) {
				if (anchors) {
					anchors.options.placement = 'left';
					anchors.add();
				}
			});
		</script><!-- Search Dialog -->
<div
	class="modal fade"
	id="mkdocs_search_modal"
	tabindex="-1"
	role="dialog"
	aria-labelledby="searchModalLabel"
	aria-hidden="true"
>
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content bg-body">
			<div class="modal-header">
				<h4 class="modal-title"
						id="searchModalLabel">Search</h4>
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="modal"
					aria-label="Close"
				>
				</button>
			</div>
			<div class="modal-body">
				<p>From here you can search these documents. Enter your search terms below.</p>
				<form>
					<div class="form-group">
						<input
							type="search"
							class="form-control"
							placeholder="Search..."
							id="mkdocs-search-query"
							title="Type search term here"
						>
					</div>
				</form>
				<div
						id="mkdocs-search-results"
						data-no-results-text="No results found">
				</div>
			</div>
			<div class="modal-footer"></div>
		</div>
	</div>
</div><!-- Keyboard Dialog -->
				<div
						class="modal"
						id="mkdocs_keyboard_modal"
						tabindex="-1"
						role="dialog"
						aria-labelledby="keyboardModalLabel"
						aria-hidden="true"
				>
						<div class="modal-dialog">
								<div class="modal-content">
										<div class="modal-header">
												<h4 class="modal-title"
														id="keyboardModalLabel">Keyboard Shortcuts</h4>
												<button
														type="button"
														class="close"
														data-dismiss="modal"
												>
														<span aria-hidden="true">&times;</span>
														<span class="visually-hidden">Close</span>
												</button>
										</div>
										<div class="modal-body">
										<table class="table">
												<thead>
												<tr>
														<th style="width: 20%;">Keys</th>
														<th>Action</th>
												</tr>
												</thead>
												<tbody>
												<tr>
														<td class="help shortcut"><kbd>?</kbd></td>
														<td>Open this help</td>
												</tr>
												<tr>
														<td class="next shortcut"><kbd>n</kbd></td>
														<td>Next page</td>
												</tr>
												<tr>
														<td class="prev shortcut"><kbd>p</kbd></td>
														<td>Previous page</td>
												</tr>
												<tr>
														<td class="search shortcut"><kbd>s</kbd></td>
														<td>Search</td>
												</tr>
												</tbody>
										</table>
										</div>
										<div class="modal-footer">
										</div>
								</div>
						</div>
				</div>
	</body>
</html>